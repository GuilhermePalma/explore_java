<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="https://jakarta.ee/xml/ns/persistence/orm" version="3.0">
    <!-- -->
    <named-query name="moviesRattinGratterOf">
        <query>
            SELECT DISTINCT f FROM Movie f
            JOIN FETCH f.actorsList
            WHERE f.rating >= :rating
        </query>
    </named-query>

    <!-- -->
    <named-native-query name="mediaRatting" result-set-mapping="rattingMovieMap">
        <query>
            SELECT AVG(rating) as mediaRating FROM movies
        </query>
    </named-native-query>

    <!-- -->
    <sql-result-set-mapping name="rattingMovieMap">
        <constructor-result target-class="com.guilhermepalma.exampleJPA.model.relations.manyToMany.Movie">
            <column name="mediaRating" class="java.lang.Double"/>
        </constructor-result>
    </sql-result-set-mapping>


</entity-mappings>
